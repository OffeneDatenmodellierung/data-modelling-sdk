{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/pixie79/data-modelling-sdk/schemas/domain-schema.json",
  "title": "Domain Schema",
  "description": "Schema for a Domain entity in the data modelling application. Domains are business-oriented containers that group related assets (tables, products, processes, etc.) within a workspace.",
  "type": "object",
  "required": ["id", "workspace_id", "name", "created_at", "last_modified_at"],
  "properties": {
    "id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the domain"
    },
    "workspace_id": {
      "type": "string",
      "format": "uuid",
      "description": "Parent workspace identifier"
    },
    "name": {
      "type": "string",
      "maxLength": 255,
      "description": "Domain name, unique within workspace"
    },
    "description": {
      "type": "string",
      "description": "Optional description of the domain's purpose"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of creation"
    },
    "last_modified_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of last modification"
    },
    "owner": {
      "type": "object",
      "description": "Owner information",
      "properties": {
        "name": {
          "type": "string",
          "description": "Owner name"
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Owner email"
        },
        "team": {
          "type": "string",
          "description": "Team name"
        },
        "role": {
          "type": "string",
          "description": "Role (e.g., 'Data Owner', 'Data Steward')"
        }
      },
      "additionalProperties": false
    },
    "systems": {
      "type": "array",
      "description": "Array of system IDs that belong to this domain",
      "items": {
        "type": "string",
        "format": "uuid"
      }
    },
    "tables": {
      "type": "array",
      "description": "Array of ODCS table IDs that belong to this domain",
      "items": {
        "type": "string",
        "format": "uuid"
      }
    },
    "products": {
      "type": "array",
      "description": "Array of ODPS product IDs that belong to this domain",
      "items": {
        "type": "string",
        "format": "uuid"
      }
    },
    "assets": {
      "type": "array",
      "description": "Array of CADS compute asset IDs that belong to this domain",
      "items": {
        "type": "string",
        "format": "uuid"
      }
    },
    "processes": {
      "type": "array",
      "description": "Array of BPMN process IDs that belong to this domain",
      "items": {
        "type": "string",
        "format": "uuid"
      }
    },
    "decisions": {
      "type": "array",
      "description": "Array of DMN decision IDs that belong to this domain",
      "items": {
        "type": "string",
        "format": "uuid"
      }
    },
    "view_positions": {
      "type": "object",
      "description": "Canvas positions for different view modes",
      "additionalProperties": {
        "type": "object",
        "description": "View mode containing entity positions",
        "additionalProperties": {
          "type": "object",
          "description": "Entity position on canvas",
          "required": ["x", "y"],
          "properties": {
            "x": {
              "type": "number",
              "description": "X coordinate on canvas"
            },
            "y": {
              "type": "number",
              "description": "Y coordinate on canvas"
            }
          },
          "additionalProperties": false
        }
      }
    },
    "folder_path": {
      "type": "string",
      "description": "Path to domain folder (for offline mode)"
    },
    "workspace_path": {
      "type": "string",
      "description": "Path to workspace root folder (for offline mode)"
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "workspace_id": "123e4567-e89b-12d3-a456-426614174000",
      "name": "Customer Management",
      "description": "Domain for customer-related data and processes",
      "created_at": "2025-01-05T10:30:00Z",
      "last_modified_at": "2025-01-05T14:45:00Z",
      "owner": {
        "name": "Jane Smith",
        "email": "jane.smith@example.com",
        "team": "Customer Data Team",
        "role": "Data Owner"
      },
      "tables": [
        "a1b2c3d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d",
        "b2c3d4e5-f6a7-5b6c-9d0e-1f2a3b4c5d6e"
      ],
      "products": [
        "c3d4e5f6-a7b8-6c7d-0e1f-2a3b4c5d6e7f"
      ],
      "processes": [
        "d4e5f6a7-b8c9-7d8e-1f2a-3b4c5d6e7f8a"
      ],
      "view_positions": {
        "systems": {
          "a1b2c3d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d": {
            "x": 100,
            "y": 200
          },
          "b2c3d4e5-f6a7-5b6c-9d0e-1f2a3b4c5d6e": {
            "x": 400,
            "y": 200
          }
        },
        "operational": {
          "a1b2c3d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d": {
            "x": 150,
            "y": 250
          }
        }
      },
      "folder_path": "/Users/example/workspaces/my-workspace/customer-management",
      "workspace_path": "/Users/example/workspaces/my-workspace"
    }
  ]
}
